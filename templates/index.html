<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hybrid ECC-AES192: Pertukaran Kunci Aman & Enkripsi File</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/process.css') }}">
</head>
<body>
    </div>

    <div class="container">
        <!-- Navigation Tabs removed -->


        <!-- Tab Content -->
        <div class="tab-content" id="mainTabContent">
            <!-- Process Tab -->
            <div class="tab-pane fade show active" id="process" role="tabpanel">
                <div class="process-container">
                    <!-- HEADER -->
                    <header class="process-header">
                        <h1>Hybrid ECCâ€“AES192</h1>
                        <p>Pertukaran Kunci Aman & Enkripsi File</p>
                    </header>

                    <!-- STEPPER -->
                    <div class="process-stepper">
                        <div class="process-step active" data-step="1">
                            <span>1</span> Generate
                        </div>
                        <div class="process-step" data-step="2">
                            <span>2</span> Exchange
                        </div>
                        <div class="process-step" data-step="3">
                            <span>3</span> Encrypt
                        </div>
                        <div class="process-step" data-step="4">
                            <span>4</span> Decrypt
                        </div>
                    </div>

                    <!-- STEP 1: GENERATE KEYS -->
                    <div class="step-content active" id="step1">
                        <div class="process-card">
                            <h2>Generate Key ECC</h2>

                            <label class="process-label">Curve</label>
                            <select class="process-select">
                                <option>secp256r1</option>
                            </select>

                            <button class="process-button" onclick="generateKeys()" id="generateKeysBtn">
                                Buat Keypair
                            </button>

                            <div class="process-result" id="keyResults"></div>
                        </div>
                    </div>

                    <!-- STEP 2: KEY EXCHANGE -->
                    <div class="step-content" id="step2">
                        <div class="process-card">
                            <h2>Key Exchange ECDH</h2>

                            <label class="process-label">Public Key</label>
                            <div class="public-keys" style="margin-bottom: 16px;">
                                <div class="public-key-block">
                                    <div class="d-flex justify-content-between align-items-start mb-1">
                                        <strong>Alice:</strong>
                                        <div>
                                            <button class="btn btn-sm btn-outline-secondary" onclick="copyToClipboard('alicePubKey')">Salin</button>
                                        </div>
                                    </div>
                                    <textarea id="alicePubKey" class="form-control public-key-area" rows="6" readonly>Belum dibuat</textarea>
                                </div>

                                <div class="public-key-block mt-3">
                                    <div class="d-flex justify-content-between align-items-start mb-1">
                                        <strong>Bob:</strong>
                                        <div>
                                            <button class="btn btn-sm btn-outline-secondary" onclick="copyToClipboard('bobPubKey')">Salin</button>
                                        </div>
                                    </div>
                                    <textarea id="bobPubKey" class="form-control public-key-area" rows="6" readonly>Belum dibuat</textarea>
                                </div>
                            </div>

                            <button class="process-button" onclick="performKeyExchange()" id="keyExchangeBtn" disabled>
                                Lakukan Pertukaran Kunci
                            </button>

                            <div class="process-result" id="exchangeResults"></div>
                        </div>
                    </div>

                    <!-- STEP 3: ENCRYPT FILE -->
                    <div class="step-content" id="step3">
                        <div class="process-card">
                            <h2>Enkripsi File</h2>

                            <label class="process-label">Pilih File</label>
                            <div class="file-input-wrapper">
                                <input type="file" id="encryptFile" class="process-select" onchange="updateFileInfo(this, 'encrypt')">
                                <div class="file-info" id="encryptFileInfo"></div>
                            </div>

                            <label class="process-label">Mode Enkripsi</label>
                            <select class="process-select" id="encryptMode">
                                <option value="gcm">AES-192-GCM (Direkomendasikan)</option>
                                <option value="cbc">AES-192-CBC</option>
                            </select>

                            <button class="process-button" onclick="encryptFile()" id="encryptBtn" disabled>
                                Enkripsi File
                            </button>

                            <div class="process-result" id="encryptResults"></div>
                        </div>
                    </div>

                    <!-- STEP 4: DECRYPT FILE -->
                    <div class="step-content" id="step4">
                        <div class="process-card">
                            <h2>Dekripsi File</h2>

                            <label class="process-label">Pilih File Terenkripsi</label>
                            <div class="file-input-wrapper">
                                <input type="file" id="decryptFile" class="process-select" onchange="updateFileInfo(this, 'decrypt')">
                                <div class="file-info" id="decryptFileInfo"></div>
                            </div>

                            <button class="process-button" onclick="decryptFile()" id="decryptBtn" disabled>
                                Dekripsi File
                            </button>

                            <div class="process-result" id="decryptResults"></div>
                        </div>
                    </div>

                    <!-- DANGER ZONE -->
                    <div class="process-danger">
                        <h3>DANGER ZONE</h3>
                        <p>Reset sistem (hapus kunci & file)</p>
                        <button onclick="resetSystem()">Reset Sistem</button>
                    </div>
                </div>
            </div>

            <!-- Performance Analysis Tab -->
            <div class="tab-pane fade" id="analysis" role="tabpanel">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header performance-stats">
                                <h5 class="mb-0">
                                    <i class="fas fa-chart-line me-2"></i>Analisis Kinerja
                                </h5>
                            </div>
                            <div class="card-body">
                                <button class="btn btn-primary mb-3" onclick="loadPerformance()">
                                    <i class="fas fa-sync me-2"></i>Segarkan Data Kinerja
                                </button>
                                
                                <div id="performanceContent">
                                    <div class="row" id="statsCards">
                                        <!-- Stats will be populated here -->
                                    </div>
                                    
                                    <div class="mt-4">
                                        <h6>Log Operasi</h6>
                                        <div class="table-responsive">
                                            <table class="table table-striped" id="logsTable">
                                                <thead>
                                                    <tr>
                                                        <th>Operasi</th>
                                                        <th>Waktu (s)</th>
                                                        <th>Detail</th>
                                                        <th>Cap Waktu</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!-- Logs will be populated here -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- About Tab -->
            <div class="tab-pane fade" id="about" role="tabpanel">
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <div class="card">
                            <div class="card-header bg-dark text-white">
                                <h5 class="mb-0">
                                    <i class="fas fa-info-circle me-2"></i>Tentang Sistem Hybrid ECC-AES192
                                </h5>
                            </div>
                            <div class="card-body">
                                <h6>Ikhtisar Sistem</h6>
                                <p>Aplikasi web ini mendemonstrasikan sistem kriptografi hibrid yang menggabungkan Elliptic Curve Cryptography (ECC) dengan Advanced Encryption Standard (AES-192) untuk pertukaran kunci yang aman dan enkripsi file.</p>
                                
                                <h6>Komponen Utama</h6>
                                <ul>
                                    <li><strong>ECC (secp256r1):</strong> Menghasilkan pasangan kunci untuk Alice dan Bob</li>
                                    <li><strong>ECDH:</strong> Elliptic Curve Diffie-Hellman untuk pertukaran kunci yang aman</li>
                                    <li><strong>HKDF:</strong> Fungsi derivasi kunci berbasis HMAC untuk menghasilkan kunci AES-192</li>
                                    <li><strong>AES-192:</strong> Enkripsi simetris untuk data file (mode GCM/CBC)</li>
                                </ul>
                                
                                <h6>Fitur Keamanan</h6>
                                <ul>
                                    <li>Kerahasiaan maju melalui ECDH</li>
                                    <li>Otentikasi melalui mode GCM</li>
                                    <li>Derivasi kunci yang aman dengan HKDF</li>
                                    <li>Tidak ada transmisi kunci privat</li>
                                </ul>
                                
                                <h6>Spesifikasi Teknis</h6>
                                <ul>
                                    <li>Kurva ECC: secp256r1 (prime256v1)</li>
                                    <li>Algoritma Simetris: AES-192</li>
                                    <li>Derivasi Kunci: HKDF-SHA256</li>
                                    <li>Ukuran File Maksimum: 16MB</li>
                                </ul>
                                
                                <div class="alert alert-info mt-3">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <strong>Catatan:</strong> Ini adalah demonstrasi edukasional untuk tujuan akademik. Untuk penggunaan produksi, langkah-langkah keamanan tambahan harus diterapkan.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/process.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
